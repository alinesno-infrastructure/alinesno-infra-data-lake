### 轻量级数据湖平台功能架构

#### 1. 统一存储与管理功能 (Unified Storage & Management)
-   **多格式数据湖存储**：支持Parquet、ORC、Avro、JSON、CSV等格式数据的低成本存储。
-   **数据生命周期管理**：提供对原始层(raw)、明细层(dwd)、汇总层(dws)、应用层(ads)数据的自动化归档、清理策略。
-   **存储资源隔离**：通过Bucket或路径策略，实现不同项目或部门的数据存储隔离。

#### 2. 数据接入与集成功能 (Data Ingestion & Integration)
-   **批量数据接入**：支持从传统数据库、日志文件、应用系统通过批量方式导入数据到湖内。
-   **CDC实时接入**：支持通过Debezium、Flink CDC等工具实现数据库变更数据的实时同步。
-   **（可选）消息队列接入**：支持通过Kafka等消息队列作为数据缓冲通道。

#### 3. 元数据与表格式功能 (Metadata & Table Format)
-   **ACID事务保障**：提供基于快照的多版本并发控制(MVCC)，确保读写操作的一致性。
-   **时间旅行(Time Travel)**：支持查询历史任意时间点的数据快照，用于数据审计、回滚或修复。
-   **Schema演进**：支持安全地添加、删除、重命名列，并保证向后兼容，无需重写数据文件。
-   **隐藏分区与分区演化**：自动处理分区逻辑，并支持在后期调整分区策略。

#### 4. 数据目录与治理功能 (Data Catalog & Governance)
-   **元数据自动采集**：自动发现、爬取并存储技术元数据（表结构、分区、血缘等）。
-   **数据血缘分析**：可视化展示数据从来源到最终消费的完整加工链路和转换过程。
-   **数据发现与搜索**：提供全局数据资产搜索，支持通过表名、列名、标签、描述等信息快速定位数据。
-   **数据协作与注解**：支持用户添加业务术语、标签、所有者、描述等信息，丰富业务上下文。

#### 5. 计算与查询功能 (Compute & Query)
-   **高性能即席查询**：提供ANSI SQL兼容的分布式查询引擎，支持对海量数据进行交互式分析。
-   **联邦查询**：支持在单条SQL中跨多个数据源（如Iceberg表、MySQL、PostgreSQL）进行关联查询。
-   **弹性计算资源调度**：计算节点可根据查询负载独立扩缩容，与存储层解耦，实现资源最优利用。

#### 6. 安全与权限控制功能 (Security & Authorization)
-   **三层权限体系**：
    -   **存储层权限**：基于MinIO IAM/S3策略，控制桶和对象的访问权限。
    -   **计算层权限**：基于Trino SQL标准权限，控制用户/角色对库、表、列的查询(SELECT)、插入(INSERT)等操作权限。
    -   **数据资产权限**：基于OpenMetadata策略，控制用户/角色对数据资产（如业务术语、标签）的访问和管理权限。
-   **数据加密**：支持传输加密(SSL/TLS)和静态加密(Server-Side Encryption)。
-   **网络隔离**：支持在VPC内部署，保障网络访问安全。

#### 7. 运维与监控功能 (Operations & Monitoring)
-   **系统监控**：集成Prometheus和Grafana，对Trino查询性能、集群健康度、MinIO存储容量及性能进行监控告警。
-   **元数据备份与恢复**：提供对核心元数据数据库(PostgreSQL)的定期备份和恢复方案。
-   **部署与配置管理**：提供基于Docker/Docker Compose或Kubernetes的快速部署脚本，实现环境一键拉起。

---

### 功能架构图（文字描述）

```
+-------------------------------------------------------+
|                应用与消费层 (Application)              | <-> BI工具, Notebook, 自定义应用
+-------------------------------------------------------+
                        | (通过JDBC/ODBC或API调用)
+-------------------------------------------------------+
|               计算与查询层 (Compute/Query)             | <- Trino: 即席查询, 联邦查询
+-------------------------------------------------------+
                        | (执行查询，读写数据)
+-------------------------------------------------------+
|         安全与权限控制 (Security & Authorization)      | <- 三权分立: MinIO IAM, Trino ACL, OM Policies
+-------------------------------------------------------+
                        |
+-------------------------------------------------------+
|           元数据与目录层 (Metadata & Catalog)          | <- Iceberg(表格式) + OpenMetadata(数据目录)
+-------------------------------------------------------+
                        | (管理元数据，定义表结构)
+-------------------------------------------------------+
|               统一存储层 (Unified Storage)             | <- MinIO/OSS (raw, dwd, dws, ads分层)
+-------------------------------------------------------+
                        | (写入数据)
+-------------------------------------------------------+
|               数据接入与集成 (Data Ingestion)          | <- 批量导入, CDC实时同步, Kafka
+-------------------------------------------------------+
                        | (从数据源抽取)
+-------------------------------------------------------+
|                  数据源 (Data Sources)                 | <- 业务DB, 应用日志, 文件, 爬虫数据...
+-------------------------------------------------------+
```

这个功能架构清晰地展示了该数据湖平台如何通过各层组件的协同工作，最终为用户提供从数据接入到消费的完整、安全、可控的数据服务能力。